<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>Выбор скина</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { background: transparent; display: flex; justify-content: center; align-items: center; height: 100vh; color: #333; }
        .container { background: #e6f0fa; padding: 30px; border-radius: 20px; width: 100%; max-width: 400px; text-align: center; }
        h2 { color: #1e90ff; font-size: 24px; margin-bottom: 20px; }
        .skin-display { margin: 20px 0; position: relative; }
        .arrow { font-size: 24px; cursor: pointer; position: absolute; top: 50%; transform: translateY(-50%); }
        .arrow.left { left: 10px; }
        .arrow.right { right: 10px; }
        .skin-image { max-width: 100%; height: auto; border: 2px solid #1e90ff; border-radius: 10px; }
        #skinId { font-size: 18px; color: #1e90ff; margin: 10px 0; }
        button { width: 100%; padding: 12px; margin-top: 20px; border: none; border-radius: 10px; background: #1e90ff; color: #fff; font-size: 14px; font-weight: 600; cursor: pointer; }
        button:hover { background: #005cbf; }
        .error-toast { position: fixed; left: 20px; top: 50%; transform: translateY(-50%); background: #ff4d4f; color: #fff; padding: 10px 15px; border-radius: 10px; display: none; }
        @media (max-width: 768px) { .container { padding: 20px; max-width: 90%; } h2 { font-size: 20px; } }
        @media (max-width: 480px) { .container { padding: 15px; } h2 { font-size: 18px; } .skin-image { max-width: 80%; } }
    </style>
</head>
<body>
    <div class="container">
        <h2>Выбор скина</h2>
        <div class="skin-display">
            <span class="arrow left" onclick="changeSkin(-1)"><</span>
            <img id="skinImage" class="skin-image" src="https://wiki.sa-mp.com/images/0/09/CJ.png" alt="Skin">
            <span class="arrow right" onclick="changeSkin(1)">></span>
        </div>
        <div id="skinId">ID скина: 0</div>
        <button onclick="selectSkin()">Подтвердить</button>
    </div>
    <div id="toast" class="error-toast"></div>

    <script>
        let currentSkin = 0;
        let gender = 0;

        cef.on('select_gender', (newGender) => {
            gender = newGender;
            currentSkin = gender === '0' ? 0 : 300; // Начальные скины для полов
            updateSkin();
        });

        function changeSkin(direction) {
            const start = gender === '0' ? 0 : 300;
            const end = gender === '0' ? 299 : 399;
            currentSkin += direction;
            if (currentSkin < start) currentSkin = end;
            else if (currentSkin > end) currentSkin = start;
            updateSkin();
        }

        function updateSkin() {
            const skinImage = document.getElementById('skinImage');
            const skinId = document.getElementById('skinId');
            skinImage.src = `https://wiki.sa-mp.com/images/thumb/${getSkinImage(currentSkin)}/200px-${getSkinImage(currentSkin)}`;
            skinId.innerText = `ID скина: ${currentSkin}`;
        }

        function getSkinImage(skinId) {
            return skinId === 0 ? '0/09/CJ.png' : `${skinId}/99/Skin_${skinId}.png`;
        }

        function selectSkin() {
            if (currentSkin) cef.emit('select_skin', currentSkin);
            else showToast('Выберите скин!');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.innerText = message;
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 3000);
        }
    </script>
</body>
</html>